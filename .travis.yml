language: python

python:
    - 3.6

install:
    - pip install --upgrade -r department_management_mini_system/requirements.txt

services:
    - mysql

before_script:
  - mysql -u root -e 'CREATE DATABASE IF NOT EXISTS company_db;'
  - mysql -u root -e 'CREATE DATABASE IF NOT EXISTS test_company_db;'
  - mysql -u root -e "CREATE USER 'manager_user'@'%' IDENTIFIED BY 'hard_password1234';"
  - mysql -u root -e "GRANT ALL PRIVILEGES ON *.* TO 'manager_user'@'%';"


env:
  - ENV='TEST'
  - TRAVIS_BUILD_DIR='department_management_mini_syste'

script:
    - python department_management_mini_system/tests/test_rest/test_rest.py
